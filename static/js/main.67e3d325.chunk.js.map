{"version":3,"sources":["components/ImageGallery/ImageGallery.module.css","components/Modal/Modal.module.css","App.module.css","components/LoadMoreButton/LoadMoreButton.module.css","components/Preloader/Preloader.module.css","services/pixabayAPI.js","components/Searchbar/Searchbar.js","components/ImageGallery/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/LoadMoreButton/LoadMoreButton.js","components/Preloader/Preloader.js","components/Modal/Modal.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","KEY","BASEURL","query","page","a","Axios","get","response","data","Error","getData","SearchBar","state","handleChange","event","setState","target","value","handleSubmit","preventDefault","onSearch","props","className","s","Searchbar","SearchForm","onSubmit","this","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","imageSrc","imageUrl","handler","src","alt","data-url","ImageGalleryItem_image","onClick","ImageGallery","images","onImageClick","map","image","webformatURL","largeImageURL","id","LoadMoreButton","onClickHandler","Button","Preloader","wrapper","color","height","width","timeout","modalRoot","document","querySelector","Modal","handlerKeyDown","code","onCloseModal","onOverlayClick","currentTarget","window","addEventListener","removeEventListener","createPortal","Overlay","children","App","pageNumber","isLoading","error","totalPages","newPageCords","modalSrc","fetchData","prevState","hits","Math","ceil","totalHits","scrollToNextPage","scrollTo","top","behavior","loadMore","cords","documentElement","scrollHeight","url","dataset","prevProps","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.67e3d325.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3MoqS\",\"ImageGalleryItem\":\"ImageGallery_ImageGalleryItem__1TNKF\",\"ImageGalleryItem_image\":\"ImageGallery_ImageGalleryItem_image__YNPLK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__BQ1jY\",\"Modal\":\"Modal_Modal__3EG1h\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__186Xt\",\"App\":\"App_App__3-ca2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"LoadMoreButton_Button__QVjmS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Preloader_wrapper__EwCMJ\"};","import Axios from 'axios';\n\nconst KEY = 'key=18267918-a545f4b922b3d8b59313b99e1';\nconst BASEURL =\n  'https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=';\n\nasync function getData(query, page) {\n  try {\n    const response = await Axios.get(\n      `${BASEURL}${query}&page=${page}&per_page=12&${KEY}`,\n    );\n    const { data } = response;\n    return data;\n  } catch (error) {\n    throw new Error(error);\n  }\n}\n\nexport default getData;\n","import React, { Component } from 'react';\r\n\r\nimport s from './Searchbar.module.css';\r\n\r\nclass SearchBar extends Component {\r\n  state = {\r\n    query: '',\r\n  };\r\n\r\n  handleChange = event => {\r\n    this.setState({\r\n      query: event.target.value,\r\n    });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    const { query } = this.state;\r\n    const { onSearch } = this.props;\r\n    onSearch(query);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.Searchbar}>\r\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={s.SearchFormButton}>\r\n            <span className={s.SearchFormButtonLabel}>Search</span>\r\n          </button>\r\n          <input\r\n            className={s.SearchFormInput}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchBar;\r\n","import s from './ImageGallery.module.css';\r\n\r\nfunction ImageGalleryItem({ imageSrc, imageUrl, handler }) {\r\n  return (\r\n    <li className={s.ImageGalleryItem}>\r\n      <img\r\n        src={imageSrc}\r\n        alt=\"\"\r\n        data-url={imageUrl}\r\n        className={s.ImageGalleryItem_image}\r\n        onClick={handler}\r\n      />\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default ImageGalleryItem;\r\n","import s from './ImageGallery.module.css';\r\n\r\nimport ImageGalleryItem from './ImageGalleryItem';\r\n\r\nfunction ImageGallery({ images, onImageClick }) {\r\n  return (\r\n    <ul className={s.ImageGallery}>\r\n      {images.map(image => {\r\n        const { webformatURL, largeImageURL, id } = image;\r\n        return (\r\n          <ImageGalleryItem\r\n            key={id}\r\n            imageSrc={webformatURL}\r\n            imageUrl={largeImageURL}\r\n            handler={onImageClick}\r\n          />\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n}\r\n\r\nexport default ImageGallery;\r\n","import s from './LoadMoreButton.module.css';\r\n\r\nfunction LoadMoreButton({ onClickHandler }) {\r\n  return (\r\n    <button className={s.Button} onClick={onClickHandler}>\r\n      Load more...\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default LoadMoreButton;\r\n","import Loader from 'react-loader-spinner';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\n\r\nimport s from './Preloader.module.css';\r\n\r\nfunction Preloader() {\r\n  return (\r\n    <div className={s.wrapper}>\r\n      <Loader\r\n        type=\"ThreeDots\"\r\n        color=\"#00BFFF\"\r\n        height={100}\r\n        width={100}\r\n        timeout={3000}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Preloader;\r\n","import { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport s from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nclass Modal extends Component {\r\n  static propTypes = {\r\n    onCloseModal: PropTypes.func.isRequired,\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handlerKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handlerKeyDown);\r\n  }\r\n\r\n  handlerKeyDown = ({ code }) => {\r\n    if (code === 'Escape') {\r\n      this.props.onCloseModal();\r\n    }\r\n  };\r\n\r\n  onOverlayClick = event => {\r\n    if (event.currentTarget === event.target) {\r\n      this.props.onCloseModal();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className={s.Overlay} onClick={this.onOverlayClick}>\r\n        <div className={s.Modal}>{this.props.children}</div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import React, { Component } from 'react';\r\n\r\nimport s from './App.module.css';\r\n\r\nimport getData from './services/pixabayAPI';\r\n\r\nimport Searchbar from './components/Searchbar/Searchbar';\r\nimport ImageGallery from './components/ImageGallery/ImageGallery';\r\nimport LoadMoreButton from './components/LoadMoreButton/LoadMoreButton';\r\nimport Preloader from './components/Preloader/Preloader';\r\nimport Modal from './components/Modal/Modal';\r\n\r\nclass App extends Component {\r\n  state = {\r\n    query: '',\r\n    pageNumber: 1,\r\n    isLoading: false,\r\n    error: false,\r\n    images: [],\r\n    totalPages: 0,\r\n    newPageCords: 0,\r\n    modalSrc: '',\r\n  };\r\n\r\n  async componentDidUpdate(prevProps, prevState) {\r\n    const { query, pageNumber } = this.state;\r\n    if (prevState.query !== query) {\r\n      this.fetchData();\r\n    }\r\n    if (\r\n      prevState.pageNumber !== pageNumber &&\r\n      prevState.pageNumber < pageNumber\r\n    ) {\r\n      await this.fetchData();\r\n      this.scrollToNextPage();\r\n    }\r\n  }\r\n\r\n  fetchData = async () => {\r\n    const { query, pageNumber } = this.state;\r\n    try {\r\n      const data = await getData(query, pageNumber);\r\n      this.setState(prevState => ({\r\n        images: [...prevState.images, ...data.hits],\r\n        isLoading: false,\r\n        totalPages:\r\n          prevState.totalPages > 0\r\n            ? prevState.totalPages\r\n            : Math.ceil(data.totalHits / 12),\r\n      }));\r\n    } catch (error) {\r\n      this.setState({\r\n        error: true,\r\n        isLoading: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  scrollToNextPage = () => {\r\n    const { newPageCords } = this.state;\r\n    window.scrollTo({\r\n      top: newPageCords,\r\n      behavior: 'smooth',\r\n    });\r\n  };\r\n\r\n  onSearch = query => {\r\n    this.setState({\r\n      query: query,\r\n      pageNumber: 1,\r\n      isLoading: true,\r\n      error: false,\r\n      images: [],\r\n      totalPages: 0,\r\n      newPageCords: 0,\r\n    });\r\n  };\r\n\r\n  loadMore = () => {\r\n    const cords = document.documentElement.scrollHeight - 170;\r\n    this.setState(prevState => ({\r\n      isLoading: true,\r\n      newPageCords: cords,\r\n      pageNumber: prevState.pageNumber + 1,\r\n    }));\r\n  };\r\n\r\n  onImageClick = event => {\r\n    const {\r\n      dataset: { url },\r\n    } = event.target;\r\n    this.setState({\r\n      modalSrc: url,\r\n    });\r\n  };\r\n\r\n  onCloseModal = () => {\r\n    this.setState({\r\n      modalSrc: '',\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { images, pageNumber, totalPages, isLoading, modalSrc } = this.state;\r\n    return (\r\n      <div className={s.App}>\r\n        <Searchbar onSearch={this.onSearch} />\r\n        {images.length > 0 && (\r\n          <ImageGallery images={images} onImageClick={this.onImageClick} />\r\n        )}\r\n        {isLoading && <Preloader />}\r\n        {pageNumber < totalPages && (\r\n          <LoadMoreButton onClickHandler={this.loadMore} />\r\n        )}\r\n        {modalSrc && (\r\n          <Modal onCloseModal={this.onCloseModal}>\r\n            <img src={modalSrc} alt=\"\" />\r\n          </Modal>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'normalize.css';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__12J3h\",\"SearchForm\":\"Searchbar_SearchForm__gyHDp\",\"SearchFormButton\":\"Searchbar_SearchFormButton__23jDf\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__ewtUF\",\"SearchFormInput\":\"Searchbar_SearchFormInput__35Hys\"};"],"sourceRoot":""}